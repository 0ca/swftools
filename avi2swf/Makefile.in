top_builddir = ..
srcdir = @srcdir@
top_srcdir = @top_srcdir@
include ../Makefile.common

all: avi2swf

avi2swf.o: avi2swf.cc
	$(CC) `avifile-config --cflags` $< -o $@

v2swf.o: v2swf.c ../lib/q.h
	$(C) $< -o $@

avi2swf: avi2swf.o v2swf.o ../lib/q.o
	$(LL) avi2swf.o v2swf.o ../lib/q.o -o avi2swf ../lib/librfxswf.a $(LIBS) `avifile-config --libs`
	$(STRIP) avi2swf

install:
	$(mkinstalldirs) $(bindir)
	$(mkinstalldirs) $(man1dir)
	@file=avi2swf;$(INSTALL_BIN);$(INSTALL_MAN1)
	
uninstall:
	@file=avi2swf;$(UNINSTALL_BIN);$(UNINSTALL_MAN1)

clean: 
	rm -f *.o *.lo *.a *.la avi2swf gmon.out

doc:
	perl ../parsedoc.pl avi2swf.doc

.PHONY: all doc clean install uninstall
