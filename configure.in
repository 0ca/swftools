dnl Process this file with autoconf to produce a configure script.
AC_INIT(pdf2swf/swfoutput.h)
AM_INIT_AUTOMAKE(swftools, pre0.0.2)
AC_ARG_PROGRAM

dnl Checks for system services
 AC_CYGWIN
 AC_EXEEXT

export CFLAGS
CFLAGS="-O2 -fomit-frame-pointer"
export CXXFLAGS
CXXFLAGS="-O2 -fomit-frame-pointer"
dnl Checks for programs.
 AC_PROG_AWK
 AC_PROG_CC
 AC_PROG_CPP
 AC_PROG_CXX
 AC_PROG_RANLIB
 AC_PROG_MAKE_SET
 AC_PROG_INSTALL
 AC_PROG_LN_S

dnl Checks for libraries.
 AC_CHECK_LIB(m, sin,, echo "Error: Math library not found.";exit)
 AC_CHECK_LIB(jpeg, jpeg_write_raw_data,, echo "Error: The jpeg library jpeglib is required.";exit)
 AC_CHECK_LIB(z, crc32,, echo "Error: The zlib compressiong handling library is required.";exit)
 AC_CHECK_LIB(t1, T1_LoadFont,,echo "Error: the T1lib truetype handling library is required.";exit)
dnl do we need those?
 AC_CHECK_LIB(pthread, pthread_create)
 AC_CHECK_LIB(X11, XFlush)

dnl Checks for header files.
AM_CONFIG_HEADER(config.h)
 AC_PATH_X
dnl AC_PATH_XTRA
 AC_HEADER_DIRENT
 AC_HEADER_STDC
 AC_CHECK_HEADERS(math.h fcntl.h limits.h malloc.h unistd.h memory.h zlib.h jpeglib.h t1lib.h)

AC_SUBST(HAVE_UNISTD_H)
AC_SUBST(EXEEXT)

dnl Checks for typedefs, structures, and compiler characteristics.
 AC_C_CONST
 AC_C_INLINE
 AC_TYPE_OFF_T
 AC_TYPE_SIZE_T
 AC_STRUCT_TM
dnl AC_CHECK_TYPE(uchar,unsigned char)
dnl AC_CHECK_TYPE(schar,signed char)
dnl AC_CHECK_TYPE(word,unsigned short int)
dnl AC_CHECK_TYPE(sword,unsigned short int)
dnl AC_CHECK_TYPE(uint,unsigned long int)

dnl Checks for library functions.
 AC_FUNC_MEMCMP
 AC_FUNC_MMAP
 AC_FUNC_VPRINTF
 AC_CHECK_FUNCS(getcwd putenv socket strcspn strdup strerror strstr)

AC_OUTPUT(./release Makefile lib/Makefile src/Makefile pdf2swf/Makefile pdf2swf/xpdf/Makefile pdf2swf/fonts/Makefile)
