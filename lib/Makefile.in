top_builddir = ..
srcdir = @srcdir@
top_srcdir = @top_srcdir@
include ../Makefile.common

all: librfxswf.a q.o

lame_objects =  lame/psymodel.o lame/fft.o lame/newmdct.o lame/quantize.o lame/takehiro.o lame/reservoir.o lame/quantize_pvt.o lame/vbrquantize.o lame/encoder.o lame/id3tag.o lame/version.o lame/tables.o lame/util.o lame/bitstream.o lame/set_get.o lame/VbrTag.o lame/lame.o
h263_objects = h.263/dct.o h.263/h263tables.o h.263/swfvideo.o
rfxswf_modules =  modules/swfbits.c modules/swfaction.c modules/swfdump.c modules/swfcgi.c modules/swfbutton.c modules/swftext.c modules/swftools.c modules/swfsound.c modules/swfshape.c modules/swfobject.c modules/swfdraw.c h.263/swfvideo.c

bitio.o: bitio.c bitio.h
	$(C) bitio.c -o $@
q.o: q.c q.h
	$(C) q.c -o $@
log.o: log.c log.h
	$(C) log.c -o $@
rfxswf.o: rfxswf.c rfxswf.h bitio.h log.h $(rfxswf_modules)
	$(C) rfxswf.c -o $@

$(lame_objects):
	cd lame;make all;cd ..

h.263/dct.o:
	$(C) h.263/dct.c -o h.263/dct.o
h.263/h263tables.o:
	$(C) h.263/h263tables.c -o h.263/h263tables.o
h.263/swfvideo.o:
	$(C) h.263/swfvideo.c -o h.263/swfvideo.o

librfxswf.a: rfxswf.o bitio.o log.o $(lame_objects) $(h263_objects)
	$(AR) r librfxswf.a rfxswf.o bitio.o log.o $(lame_objects) $(h263_objects)
	$(RANLIB) librfxswf.a

install:
uninstall:

clean: 
	rm -f *.o *.lo *.a *.la
	cd lame;$(MAKE) clean;cd ..
	cd h.263;$(MAKE) clean;cd ..

