top_builddir = ..
srcdir = @srcdir@
top_srcdir = @top_srcdir@
include ../Makefile.common

programs = wav2swf png2swf swfcombine swfstrings swfextract swfdump @JPEG2SWF@

all: $(programs)

wav2swf.o: wav2swf.c wav.h
	$(C) wav2swf.c -o $@
wav.o: wav.c wav.h
	$(C) wav.c -o $@
png2swf.o: png2swf.c
	$(C) png2swf.c -o $@
swfcombine.o: swfcombine.c
	$(C) swfcombine.c -o $@
swfdump.o: swfdump.c
	$(C) swfdump.c -o $@
swfextract.o: swfextract.c
	$(C) swfextract.c -o $@
swfstrings.o: swfstrings.c
	$(C) swfstrings.c -o $@
jpeg2swf.o: jpeg2swf.c
	$(C) jpeg2swf.c -o $@

wav2swf: wav2swf.o wav.o
	$(L) wav2swf.o wav.o -o $@ ../lib/librfxswf.a $(LIBS)
png2swf: png2swf.o
	$(L) png2swf.o -o $@ ../lib/librfxswf.a $(LIBS)
swfcombine: swfcombine.o
	$(L) swfcombine.o -o $@ ../lib/librfxswf.a $(LIBS)
swfdump: swfdump.o
	$(L) swfdump.o -o $@ ../lib/librfxswf.a $(LIBS)
swfextract: swfextract.o
	$(L) swfextract.o -o $@ ../lib/librfxswf.a $(LIBS)
swfstrings: swfstrings.o
	$(L) swfstrings.o -o $@ ../lib/librfxswf.a $(LIBS)
jpeg2swf: jpeg2swf.o
	$(L) jpeg2swf.o -o $@ ../lib/librfxswf.a $(LIBS)

install:
	$(mkinstalldirs) $(bindir)
	$(mkinstalldirs) $(man1dir)
	@for file in $(programs); do $(INSTALL_BIN);$(INSTALL_MAN1);done
	
uninstall:
	@for file in $(programs); do $(UNINSTALL_BIN);$(UNINSTALL_MAN1);done

clean: 
	rm -f *.o *.lo *.a *.la wav2swf png2swf swfcombine swfextract swfstrings png2swf jpeg2swf *~

